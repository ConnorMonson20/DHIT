<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
.category-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
  max-width: 700px;
}


.dropdown-content {
  display: none;
  background-color: #ffffff;
  color: #333;
  padding: 16px;
  font-size: 16px;
  line-height: 1.6;
  box-shadow: 0 4px 8px rgba(0,0,0,0.15);
  border-radius: 8px;
  margin-top: 8px;
  width: 100%; /* fills wrapper */
  text-align: left;
}

.category-wrapper:hover .dropdown-content {
  display: block;
}
.percent-description {
  max-width: 2100px;
  text-align: left;
  margin: 40px auto 0 auto;
  font-size: 24px;
  line-height: 1.8;
  font-weight: 400;
  color: #333;
  padding: 0 40px;
}

    body {
      font-family: 'Inter', Arial, sans-serif; 
      text-align: center;
      background-color: #f9f9f9;
      margin: 20px;
      zoom: 40%;
      transform-origin: top center;
    }

    h1 {
      font-size: 64px;
      margin-bottom: 10px;
    }

    .subtext {
      font-size: 32px;
      color: #505871;
      margin-bottom: 30px;
      padding: 0 60px;
    }
    .subtext2 {
  font-size: 24px;
  color: #505871;
  margin-bottom: 30px;
  padding: 0 40px;
  text-align: left;
  width: 1955px;
  max-width: 100%;
  margin-left: auto;
  margin-right: auto;
}




    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
    }

    .table {
      display: grid;
      grid-template-columns: repeat(17, 115px);
      grid-template-rows: repeat(7, 115px);
      gap: 5px;
      margin-bottom: 20px;
    }

    .flip-card {
      width: 115px;
      height: 115px;
      perspective: 1000px;
      border: 2px solid transparent;
      position: relative;
      transition: transform 0.2s, box-shadow 0.2s, border 0.2s;
    }

    .flip-card:hover {
      z-index: 999;
      transform: scale(1.05);
      box-shadow: 0 0 12px rgba(0,0,0,0.5);
      border-color: black;
    }

    .flip-card.selected {
      z-index: 999;
      box-shadow: 0 0 12px rgba(0,0,0,0.5);
      border-color: black;
    }

    .flip-card-inner {
      width: 100%;
      height: 100%;
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.6s;
    }

    .flip-card:hover .flip-card-inner {
      transform: rotateY(180deg);
    }

    .flip-card-front,
    .flip-card-back {
      position: absolute;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 4px;
      font-weight: bold;
      color: white;
      border: 1px solid #ccc;
      box-sizing: border-box;
      backface-visibility: hidden;
      -webkit-backface-visibility: hidden;
    }

    .flip-card-front { font-size: 12px; }
    .flip-card-back  { font-size: 12px; transform: rotateY(180deg); }

    .symbol {
      font-size: 40px; 
      font-weight: bold;
      margin-bottom: 4px;
    }

    .info-card {
      width: 1600px;
      min-height: 160px;
      margin-top: 10px;
      padding: 30px 0;
      background-color: #ffffff;
      border: 4px solid #ddd;
      display: flex;
      flex-direction: row;
      box-shadow: 0 4px 12px rgba(0,0,0,0.08);
      transition: background-color 0.3s, border-color 0.3s;
    }

    .info-left, .info-right {
      width: 45%;
      padding: 0 30px;
      display: flex;
      flex-direction: column;
      justify-content: center;
    }

    .info-left {
      text-align: right;
      align-items: flex-end;
      border-right: 1px solid #ccc;
    }

    .info-right {
      text-align: left;
      align-items: flex-start;
    }

    .info-separator {
      width: 1px;
      height: 100px;
      background-color: #ccc;
    }

    .info-category {
      text-transform: uppercase;
      font-size: 28px;
      font-weight: bolder;
      color: #505871 !important;
      margin-bottom: 6px;
    }

    .info-name {
  font-size: 22px;
  font-weight: 700;
  color: #505871; /* default color (for placeholder) */
  padding: 8px 16px;
  border-radius: 6px;
  background-color: transparent;
  box-shadow: none;
  text-align: center;
  align-self: flex-end;
  transition: all 0.3s ease;
}



    .info-example-label {
      font-size: 14px;
      font-weight: 600;
      letter-spacing: 1.6px;
      text-transform: uppercase;
      color: #a2acbd; 
      margin-bottom: 4px;
    }

    .info-example {
      font-size: 22px;
      color: #505871 !important;
      white-space: pre-wrap;
    }


    .percentages .category {
      font-size: 24px;
      font-weight: bold;
      padding: 8px 12px;
      border-radius: 8px;
      color: white;
      white-space: nowrap;
    }
    .percentages-wrapper {
  display: flex;
  flex-direction: column;
  align-items: center;
  width: 100%;
}

.percentages {
  display: flex;
  justify-content: center;
  flex-wrap: wrap;
  gap: 20px;
  margin-top: 30px;
}

#dropdown-container {
  margin-top: 20px;
  width: 90%;
  max-width: 1200px;
  transition: all 0.3s ease;
}

.dropdown-box {
  background-color: transparent;
  border: none;
  box-shadow: none;
  padding: 0;
  font-size: 22px;
  line-height: 1.8;
  text-align: left;
  max-width: 1200px;
}




  </style>
</head>
<body>
  <h1>Periodic Table of Health Elements&trade;</h1>
  <div class="subtext">Your Innovation GPS for Health Transformation<br></div>
  <div class="container">
    <div class="table" id="health-table"></div>

    <div class="info-card" id="info-box">
      <div class="info-left">
        <div id="info-category" class="info-category"></div>
        <div id="info-name" class="info-name">Hover over or click a card to see details here.</div>
      </div>
      <div class="info-separator"></div>
      <div class="info-right">
        <div id="info-example-label" class="info-example-label">Example</div>
        <div id="info-example" class="info-example"></div>
      </div>
    </div>
    <div class="percent-description">
      <em>Hover over each category to learn more about its impact.</em><br><br>
      The Table is organized into five individual, yet fluid categories: Medical Care, Environment, Individual Behavior, Genetics and Biology, and Socio-economic Circumstances. Based on current public health research and consensus, each is ranked by its estimated percentage influence on overall health. These rankings are supported by a synthesis of epidemiological studies, population health data, and reports from institutions such as the CDC, WHO, and NIH, which analyze the relative impact of social, behavioral, environmental, genetic, and healthcare factors on health outcomes and life expectancy.
    </div>
    <div class="percentages-wrapper">
      <div class="percentages">
        <div class="category" style="background-color: #4A90E2" data-category="medical">Medical Care 11%</div>
        <div class="category" style="background-color: #7ED321" data-category="environment">Environment 7%</div>
        <div class="category" style="background-color: #F5A623" data-category="individual">Individual Behavior 36%</div>
        <div class="category" style="background-color: #9013FE" data-category="genetics">Genetics & Biology 22%</div>
        <div class="category" style="background-color: #D0021B" data-category="socio">Socio-economic 24%</div>
      </div>
      <div id="dropdown-container"></div>
    </div>
    

  
  </div>

  <script>
    const colsMap = {
  1: [1,2,3,4,5,6],
  2: [7,8,9,10,11,12],
  3: [13,14,15,16,17,18],
  4: [19,20,21,22],
  5: [23,24,25,26],
  6: [27,28,29,30],
  7: [31,32,33,34],
  8: [35,36,37,38],
  9: [39,40,41,42],
  10: [43,44,45,46,47],
  11: [48,49,50,51,52],
  12: [53,54,55,56,57],
  13: [58,59,60,61,62],
  14: [63,64,65,66,67,68],
  15: [69,70,71,72,73,74],
  16: [75,76,77,78,79,80,81],
  17: [82,83,84,85,86,87,88,89]
};



const rowsMap = {
  1: [75,82],
  2: [1,7,13,63,69,76,83],
  3: [2,8,14,43,48,53,58,64,70,77,84],
  4: [3,9,15,19,23,27,31,35,39,44,49,54,59,65,71,78,85],
  5: [4,10,16,20,24,28,32,36,40,45,50,55,60,66,72,79,86],
  6: [5,11,17,21,25,29,33,37,41,46,51,56,61,67,73,80,87],
  7: [6,12,18,22,26,30,34,38,42,47,52,57,62,68,74,81,88,89]
};



    function getColumn(n){
      for(let c=1;c<=17;c++){ if(colsMap[c].includes(n)) return c; }
      return 1;
    }

    function getRow(n){
      for(let r=1;r<=7;r++){ if(rowsMap[r].includes(n)) return r; }
      return 1;
    }
    
    const categoryColors = {
      medical: "#44a2e6",
      environment: "#7cc25d",
      individual: "#f27f00",
      genetics: "#7359b7",
      socio: "#d6280b"
    };
    const hoverColors = {
  medical: "#e1f3ff",
  environment: "#e9f9e1",
  individual: "#fdefe5",
  genetics: "#f7f4ff",
  socio: "#fee6e3"
};
    function darkenColor(hex, percent) {
  const num = parseInt(hex.replace('#',''), 16);
  const amt = Math.round(2.55 * percent);
  const R = (num >> 16) - amt;
  const G = (num >> 8 & 0x00FF) - amt;
  const B = (num & 0x0000FF) - amt;
  return '#' + (
    0x1000000 +
    (Math.max(0,R)<<16) +
    (Math.max(0,G)<<8) +
    Math.max(0,B)
  ).toString(16).slice(1);
}


    function normCat(raw) {
      const lc = (raw || "").toLowerCase();
      if (lc.includes("medical")) return "medical";
      if (lc.includes("environment")) return "environment";
      if (lc.includes("individual")) return "individual";
      if (lc.includes("genetics")) return "genetics";
      if (lc.includes("socio")) return "socio";
      return "medical";
    }

    const table = document.getElementById("health-table");
    const infoBox = document.getElementById("info-box");
    let lockedElement = null;

    function populateInfo(el) {
      const key = normCat(el.category);
      const clrBox = categoryColors[key]
      const clr = hoverColors[key];

  // Set category text
  document.getElementById('info-category').textContent = el.category.toUpperCase();
  document.getElementById('info-category').style.color = '#505871';


  // Set name and apply colored background styling
  const nameBox = document.getElementById('info-name');
  nameBox.textContent = el.name;
  nameBox.style.backgroundColor = clrBox;
  nameBox.style.boxShadow = '0 1px 3px rgba(0,0,0,0.2)';
  nameBox.style.padding = '8px 16px';
  nameBox.style.borderRadius = '6px';
  nameBox.style.color = '#505871';

  document.getElementById('info-example-label').textContent = 'Example';
  document.getElementById('info-example').textContent = el.example1;

  infoBox.style.backgroundColor = clr;
  infoBox.style.borderColor = clr;
}


function resetInfo() {
  document.getElementById('info-category').textContent = '';

  const nameBox = document.getElementById('info-name');
  nameBox.textContent = 'Hover over or click a card to see details here.';
  nameBox.style.backgroundColor = 'transparent';
  nameBox.style.boxShadow = 'none';
  nameBox.style.color = '#505871';
  nameBox.style.padding = '0';  
  nameBox.style.borderRadius = '0'; 

  document.getElementById('info-example-label').textContent = '';
  document.getElementById('info-example').textContent = '';
  infoBox.style.backgroundColor = '#ffffff';
  infoBox.style.borderColor = '#ddd';
}

resetInfo();



    fetch('./elements_data_min.json')
      .then(res => res.json())
      .then(elements => {
        elements.forEach(el => {
          const key = normCat(el.category);
          const clr = categoryColors[key];
          const clr2 = hoverColors[key]
          const card = document.createElement('div');
          card.className = 'flip-card';
          card.style.gridColumn = getColumn(el.number);
          card.style.gridRow = getRow(el.number);

          card.innerHTML = `
  <div class="flip-card-inner">
    <div class="flip-card-front" style="background-color:${clr};">
      <div class="symbol">${el.symbol}</div>
    </div>
    <div class="flip-card-back" style="background-color:${clr};">
      ${el.name}
    </div>
  </div>`;



          card.addEventListener('mouseenter', () => {
            if (!lockedElement) populateInfo(el);
          });
          card.addEventListener('mouseleave', () => {
            if (!lockedElement) resetInfo();
          });

          card.addEventListener('click', e => {
            const selected = document.querySelector('.flip-card.selected');
            if (lockedElement && lockedElement.number === el.number) {
              lockedElement = null;
              card.classList.remove('selected');
              resetInfo();
            } else {
              if (selected) selected.classList.remove('selected');
              lockedElement = el;
              card.classList.add('selected');
              populateInfo(el);
            }
            e.stopPropagation();
          });

          table.appendChild(card);
        });

        document.addEventListener('click', () => {
          const selected = document.querySelector('.flip-card.selected');
          if (selected) selected.classList.remove('selected');
          lockedElement = null;
          resetInfo();
        });
      })
      .catch(err => {
        console.error(err);
        alert('Failed to load element data.');
      });
      const dropdownContainer = document.getElementById('dropdown-container');
  const categoryButtons = document.querySelectorAll('.category');

  categoryButtons.forEach(btn => {
    btn.addEventListener('mouseenter', () => {
      const key = btn.getAttribute('data-category');
      dropdownContainer.innerHTML = `
        <div class="dropdown-box">
          ${descriptions[key]}
        </div>
      `;
    });

    btn.addEventListener('mouseleave', () => {
      dropdownContainer.innerHTML = '';
    });
  });
</script>

  <script>
    const descriptions = {
      medical: `The services and interventions by healthcare professionals to maintain, restore, or improve a person's health and well-being. However, medical care constitutes only a small percentage of the impact on an individual’s health. More impactful is the effect of access, or lack thereof, to health services and an overall decline in an understanding of one’s own health and the concomitant factors that influence health.`,
      
      environment: `The natural and man-made places we live and work, encompassing both the structural and natural elements of life. Environment, despite having the lowest impact on health, still remains important. From pollution to lack of accessibility, the environment can have deleterious impacts on health.`,
      
      individual: `The totality of an individual’s actions in response to internal and external stimuli, it is by far the most impactful determinant for our physical and mental health and overall well-being. Adopting healthier behaviors can lower the risk of developing various diseases, and many public health initiatives have already targeted the reduction of harmful habits.`,
      
      genetics: `Biological factors like genetics and aging influence health but account for only a portion of overall outcomes. While genome sequencing may improve future health predictions, its widespread use remains impractical. Variations in genetic and biological influences must be considered when assessing health determinants.`,
      
      socio: `Socio-economic circumstances are defined as the societal conditions in which individuals grow and develop. Factors such as social status, early childhood experiences, and cultural upbringing influence both social development and overall health. Adverse conditions, including discrimination, poverty, and limited education, are often linked to poorer health outcomes and a lower quality of life.`
    };
    </script>
</body>
</html>
